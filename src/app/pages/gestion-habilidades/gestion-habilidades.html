<div class="max-w-7xl mx-auto flex flex-col space-y-8 animate-in fade-in duration-700">

  <app-portal-header></app-portal-header>

  <div class="bg-white rounded-[2.5rem] shadow-xl border border-gray-100 overflow-hidden flex flex-col h-[calc(100vh-180px)]">

    <div class="p-8 border-b border-gray-50 flex justify-between items-center bg-white shrink-0">
      <div>
        <h2 class="text-2xl font-black italic text-[#002855] tracking-tight">
          {{ modoFormulario() ? 'Configurar Nueva Evaluación' : 'Historial de Evaluaciones' }}
        </h2>
      </div>

      <button (click)="alternarVista()"
              [ngClass]="modoFormulario() ? 'btn btn-ghost text-gray-400' : 'btn bg-[#002855] text-white px-10 rounded-full border-none shadow-lg'">
        {{ modoFormulario() ? '✕ Cancelar' : '＋ Nueva Evaluación' }}
      </button>
    </div>

    <div class="flex-1 overflow-y-auto p-8 bg-gray-50/50 custom-scroll">

      @if (!modoFormulario()) {
        <div class="grid gap-4 max-w-4xl mx-auto">
          @for (prog of programaciones(); track prog.id) {
            <app-eval-history-card
              [fecha]="prog.fechaHabilitada"
              [hora]="prog.horaInicio || 'No definidalternarVista'"
              (onDelete)="eliminar(prog.id)">
            </app-eval-history-card>
          }
        </div>
      } @else {
        <app-eval-form (onSave)="crearEvaluacion($event)"></app-eval-form>
      }

    </div>
  </div>
</div>
